{{- define "main" }}

<!-- tailwind css -->
{{ $styles := resources.Get "css/main.css" }} {{ $styles = $styles |
resources.PostCSS }} {{ if hugo.IsProduction }} {{- with $styles -}}
<style>
  {{- .Content | safeCSS -}}
</style>
{{- end -}} {{ else }} {{ $styles = $styles | resources.ExecuteAsTemplate
(printf "css/index.dev.%v.css" now.UnixMilli) .}}
<link href="{{ $styles.RelPermalink }}" rel="stylesheet" />
{{ end }}
<!-- end tailwind css -->
<style>
  .text-box {
    text-align: center;
    overflow: hidden;
    font-size: 4em;
  }
  .ani-text,
  .ani-text2 {
    display: inline-block;
  }
  .text-box .ani-text2 color {
    font-weight: 900;
  }
  .to-out {
    transition: all 1s;
    opacity: 0;
  }
</style>

<div class="text-box">
  <span class="ani-text">Hi! My name is Stan</span>
  <span class="ani-text2">I'm here to <color id="act-text"></color></span>
</div>
<section
  id="code-demo"
  class="py-8"
  style="width: 720px; height: 525px"
></section>
<section id="cta" class="flex justify-center">
  <a
    class="to-out px-4 py-2 font-semibold text-sm bg-white text-slate-700 border border-slate-300 rounded-md shadow-sm ring-2 ring-offset-2 ring-offset-slate-50 ring-blue-500 dark:ring-offset-slate-900 dark:bg-slate-700 dark:text-slate-200 dark:border-transparent"
    href="/contact"
  >
    Contact
  </a>
</section>
<!--
<article class="post-single">
  <header class="post-header">
    {{ partial "breadcrumbs.html" . }}
    <h1 class="post-title">
      {{ .Title }}
      {{- if .Draft }}<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup>{{- end }}
    </h1>
    {{- if .Description }}
    <div class="post-description">
      {{ .Description }}
    </div>
    {{- end }}
    {{- if not (.Param "hideMeta") }}
    <div class="post-meta">
      {{- partial "translation_list.html" . -}}
      {{- partial "post_canonical.html" . -}}
    </div>
    {{- end }}
  </header>
  {{- $isHidden := .Params.cover.hidden | default site.Params.cover.hiddenInSingle | default site.Params.cover.hidden }}
  {{- partial "cover.html" (dict "cxt" . "IsHome" false "isHidden" $isHidden) }}
  {{- if (.Param "ShowToc") }}
  {{- partial "toc.html" . }}
  {{- end }}

  {{- if .Content }}
  <div class="post-content">
    {{ .Content }}
  </div>
  {{- end }}

  <footer class="post-footer">
    {{- $tags := .Language.Params.Taxonomies.tag | default "tags" }}
    <ul class="post-tags">
      {{- range ($.GetTerms $tags) }}
      <li><a href="{{ .Permalink }}">{{ .LinkTitle }}</a></li>
      {{- end }}
    </ul>
    {{- if (.Param "ShowPostNavLinks") }}
    {{- partial "post_nav_links.html" . }}
    {{- end }}
    {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }}
    {{- partial "share_icons.html" . -}}
    {{- end }}
  </footer>

  {{- if (.Param "comments") }}
  {{- partial "comments.html" . }}
  {{- end }}
</article>
-->
<section class="front-bottom-list flex justify-between to-out">
  <div id="front-recent-posts" class="front-list w-64">
    <h3 class="text-2xl py-8">Recent posts</h3>
    <ul class="list-disc ml-4">
      <li>test</li>
      <li>test</li>
    </ul>
  </div>
  <div id="front-changelog" class="front-list w-64">
    <h3 class="text-2xl py-8">Changelog</h3>
    <ul class="list-disc ml-4">
      <li>
        Lorem ipsum dolor sit amet consectetur, adipisicing elit. Adipisci
        consequatur numquam animi maiores sapiente, minus eos id error in
        laudantium reprehenderit nam consequuntur optio rerum quo perferendis
        odio repudiandae provident!
      </li>
      <li>test</li>
    </ul>
  </div>
</section>
<section id="subscribe" class="to-out py-12 flex justify-center">
  <div>
    <h2 class="text-2xl font-bold">Subscribe</h2>
    <p>to get monthly updates</p>
    <div class="mt-8 max-w-md">
      <div class="grid grid-cols-1 gap-6">
        <label class="block">
          <span class="text-gray-700">Email address</span>
          <input
            type="email"
            class="mt-1 block w-full rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0"
            placeholder="john@example.com"
          />
        </label>
      </div>
    </div>
    <a
      class="text-center to-out px-4 py-2 font-semibold text-sm bg-white text-slate-700 border border-slate-300 rounded-md shadow-sm ring-2 ring-offset-2 ring-offset-slate-50 ring-blue-500 dark:ring-offset-slate-900 dark:bg-slate-700 dark:text-slate-200 dark:border-transparent"
      href="#"
    >
      I'm in
    </a>
  </div>
</section>

<script src="https://threejs.org/build/three.min.js"></script>
<script src="/Julia/dat.gui.min.js"></script>
<script src="/Julia/main.js"></script>
<script src="https://animejs.com/lib/anime.min.js"></script>
<script>
  var data = [];
  {{- $data := $.Site.Data.acts.acts.acts | jsonify }}
  try {
    data = JSON.parse({{$data}});
  } catch(e) {}
  const actTextEl = document.getElementById('act-text');
  const someAct = data[Math.floor(Math.random()*data.length)];
  const defaultAct = {
    name: 'Create',
    color: '#9630a7',
    color_end: '#9630a7',
  };
  var randomAct = someAct ? someAct : defaultAct;
  actTextEl.textContent = randomAct.name;
  actTextEl.style.color = randomAct.color;
</script>
<script>
  const primaryAnimation = () => {
    var loopCompleted = 0;
    anime
      .timeline({
        loop: true,
        duration: 6000,
        loopComplete: function (anim) {
          loopCompleted++;
          if (loopCompleted > 3) {
            anime.remove(".text-box .ani-text2 color");
          }
        },
      })
      .add({
        targets: ".text-box .ani-text2 color",
        color: randomAct.color,
        easing: "easeInOutSine",
        duration: 1000,
      })
      .add({
        targets: ".text-box .ani-text2 color",
        color: randomAct.colorEnd,
        easing: "easeInOutSine",
        duration: 1000,
      });

    anime
      .timeline({ loop: false })
      .add({
        targets: ".to-out",
        opacity: 0,
        duration: 1000,
        easing: "easeOutExpo",
        delay: 1000,
      })
      .add({
        targets: ".text-box .ani-text",
        translateY: [100, 0],
        easing: "easeOutExpo",
        duration: 1400,
      })
      .add({
        targets: ".text-box .ani-text",
        opacity: 0,
        easing: "easeOutExpo",
        duration: 400,
        delay: 1000,
      })
      .add({
        targets: ".text-box .ani-text2",
        translateY: [100, 0],
        easing: "easeOutExpo",
        duration: 1400,
      })
      .add({
        targets: ".text-box",
        display: "none",
        width: "0px",
        height: "0px",
        duration: 1000,
        easing: "easeOutExpo",
        delay: 1000,
      })
      .add({
        targets: ".to-out",
        opacity: 1,
        duration: 1000,
        easing: "easeOutExpo",
      });
  };
  function getTimestampInSeconds() {
    return Math.floor(Date.now() / 1000);
  }

  const highlightState = localStorage.getItem("highlight");
  const needHighlight = highlightState
    ? getTimestampInSeconds() - parseInt(highlightState) > 1440
    : true;

  if (needHighlight) {
    localStorage.setItem("highlight", getTimestampInSeconds());
    primaryAnimation();
  } else {
    var elems = document.querySelectorAll(".to-out");
    [].forEach.call(elems, function (el) {
      el.classList.remove("to-out");
    });
  }
</script>
{{- end }}{{/* end main */}}
