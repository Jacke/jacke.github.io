{{- define "main" }}

<!-- tailwind css -->
{{ $styles := resources.Get "css/main.css" }} {{ $styles = $styles |
resources.PostCSS }} {{ if hugo.IsProduction }} {{- with $styles -}}
<style>
  {{- .Content | safeCSS -}}
</style>
{{- end -}} {{ else }} {{ $styles = $styles | resources.ExecuteAsTemplate
(printf "css/index.dev.%v.css" now.UnixMilli) .}}
<link href="{{ $styles.RelPermalink }}" rel="stylesheet" />
{{ end }}
<!-- <div class="h-6 w-6 float-left"></div>-->
<!-- end tailwind css -->
<style>
  .text-box {
    text-align: center;
    overflow: hidden;
    font-size: 4em;
  }
  .ani-text,
  .ani-text2 {
    display: inline-block;
  }
  .text-box .ani-text2 color {
    font-weight: 900;
  }
  .to-out {
    transition: all 1s;
    opacity: 0;
  }
  section.subscribe {
    background: #1b1c1e;
  }
</style>

<div class="text-box">
  <span class="ani-text">Hi! My name is Stan</span>
  <span class="ani-text2">I'm here to <color id="act-text"></color></span>
</div>
<section
  id="code-demo"
  class="py-8 relative"
  style="width: 720px; height: 525px"
>
<div class="code-demo-mouse-icon w-3.5 absolute right-7	top-10">
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
    <path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zm-7.518-.267A8.25 8.25 0 1120.25 10.5M8.288 14.212A5.25 5.25 0 1117.25 10.5" />
  </svg>
</div>
</section>

<section id="social-media" class="flex justify-center m-7 mt-12 mb-0">
  {{- partial "social_icons.html" site.Params.socialIcons -}}
</section>

<section class="front-bottom-list flex justify-between to-out">
  <div id="front-recent-posts" class="front-list w-64">
    <h3 class="text-2xl py-4"><a href="/blog">Posts</a></h3>
    <ul class="list-none leading-normal">
      {{- $pages := union .RegularPages .Sections }}
      {{- if .IsHome }}
      {{- $pages = where site.RegularPages "Type" "=" "blog" }}
      {{- $pages = where $pages "Params.hiddenInHomeList" "!=" "true"  }}
      {{- end }}
      {{- $paginator := .Paginate $pages }}
      {{- $pages := where site.RegularPages "Section" "=" "blog" }}
      {{ range last 5 $pages }}
      <li class="blog-post-entry m-3 ml-0 mt-0">
          <a aria-label="post link to {{ .Title | plainify }}" href="{{ .Permalink }}">{{- .Title }}</a>
      </li>
      {{- end }}
    </ul>
  </div>
  <div id="front-changelog" class="front-list w-64">
    <h3 class="text-2xl py-4"><a href="/changelog">Changelog</a></h3>
    <ul class="list-none leading-normal">
      {{- $changelogs := where site.RegularPages "Section" "=" "changelog" }}
      {{ range last 3 $changelogs }}
        <li class="changelog-entry m-3 ml-0 mt-0">
          <a class="changelog-link" aria-label="post link to {{ .Title | plainify }}" href="{{ .Permalink }}">{{- .Title }}</a>
        {{- if (ne (.Param "hideSummary") true) }}
        <div class="changelog-summary text-s">
          <p>{{ .Summary | plainify | htmlUnescape | truncate 42 }}{{ if .Truncated }}...{{ end }}</p>
        </div>
        <div class="changelog-tags text-xs">
        {{ range (.GetTerms "tags") }}
            <a href="{{ .Permalink }}" class="changelog-tag text-teal-400">{{ .LinkTitle }}</a>
        {{ end }}
        </div>
        {{- end }}
      </li>
      {{- end }}
    </ul>
  </div>
</section>

<section
  id="subscribe"
  class="to-out pt-8 flex flex-col justify-center items-center text-center"
>
  <div class="subscribe-announcement m-4 max-w-md">
    <h2 class="text-2xl font-bold">Subscribe</h2>
    <p>Crisp monthly newsletter</p>
  </div>
  <div class="max-w-md">
    <div id="mce-responses" class="clear foot">
      <div class="response" id="mce-error-response" style="display:none"></div>
      <div class="response" id="mce-success-response" style="display:none"></div>
    </div>
    <form class="m-4 flex" action="https://gmail.us13.list-manage.com/subscribe/post?u=9d9c000a90c3c897b7fe060d7&amp;id=a57aae69b6&amp;f_id=0024c2e2f0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <input
        class="rounded-l-lg p-4 border-t mr-0 border-b border-l text-gray-800 border-gray-200 bg-white"
        type="email" value="" name="EMAIL" id="mce-EMAIL" required
        placeholder="john@doe.com"
      />
      <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="themable-button px-8 rounded-r-lg bg-yellow-400 text-white font-bold p-4 uppercase border-yellow-500 border-t border-b border-r">
    </form>
  </div>
</section>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[3]='ADDRESS';ftypes[3]='address';fnames[4]='PHONE';ftypes[4]='phone';fnames[5]='BIRTHDAY';ftypes[5]='birthday';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<script src="https://threejs.org/build/three.min.js"></script>
<script src="/Julia/dat.gui.min.js"></script>
<script src="/Julia/main.js"></script>
<script src="https://animejs.com/lib/anime.min.js"></script>
<script>
  var data = [];
  {{- $data := $.Site.Data.acts.acts.acts | jsonify }}
  try {
    data = JSON.parse({{$data}});
  } catch(e) {}
  const actTextEl = document.getElementById('act-text');
  const someAct = data[Math.floor(Math.random()*data.length)];
  const defaultAct = {
    name: 'Create',
    color: '#9630a7',
    color_end: '#9630a7',
  };
  var randomAct = someAct ? someAct : defaultAct;
  actTextEl.textContent = randomAct.name;
  actTextEl.style.color = randomAct.color;
  var elems = document.querySelectorAll(".themable-button");
  [].forEach.call(elems, function (el) {
    el.style.background = randomAct.color;
  });
</script>
<script>
  const primaryAnimation = () => {
    var loopCompleted = 0;
    anime
      .timeline({
        loop: true,
        duration: 6000,
        loopComplete: function (anim) {
          loopCompleted++;
          if (loopCompleted > 3) {
            anime.remove(".text-box .ani-text2 color");
          }
        },
      })
      .add({
        targets: ".text-box .ani-text2 color",
        color: randomAct.color,
        easing: "easeInOutSine",
        duration: 1000,
      })
      .add({
        targets: ".text-box .ani-text2 color",
        color: randomAct.colorEnd,
        easing: "easeInOutSine",
        duration: 1000,
      });

    anime
      .timeline({ loop: false })
      .add({
        targets: ".to-out",
        opacity: 0,
        duration: 1000,
        easing: "easeOutExpo",
        delay: 1000,
      })
      .add({
        targets: ".text-box .ani-text",
        translateY: [100, 0],
        easing: "easeOutExpo",
        duration: 1400,
      })
      .add({
        targets: ".text-box .ani-text",
        opacity: 0,
        easing: "easeOutExpo",
        duration: 400,
        delay: 1000,
      })
      .add({
        targets: ".text-box .ani-text2",
        translateY: [100, 0],
        easing: "easeOutExpo",
        duration: 1400,
      })
      .add({
        targets: ".text-box",
        display: "none",
        width: "0px",
        height: "0px",
        duration: 1000,
        easing: "easeOutExpo",
        delay: 1000,
      })
      .add({
        targets: ".to-out",
        opacity: 1,
        duration: 1000,
        easing: "easeOutExpo",
      });
  };
  function getTimestampInSeconds() {
    return Math.floor(Date.now() / 1000);
  }

  const highlightState = localStorage.getItem("highlight");
  const needHighlight = highlightState
    ? getTimestampInSeconds() - parseInt(highlightState) > 1440
    : true;

  if (needHighlight) {
    localStorage.setItem("highlight", getTimestampInSeconds());
    primaryAnimation();
  } else {
    var elems = document.querySelectorAll(".to-out");
    [].forEach.call(elems, function (el) {
      el.classList.remove("to-out");
    });
  }
</script>
{{- end }}{{/* end main */}}
