{{- define "main" }}

<!-- tailwind css -->
{{ $styles := resources.Get "css/main.css" }} {{ $styles = $styles |
resources.PostCSS }} {{ if hugo.IsProduction }} {{- with $styles -}}
<style>
  {{- .Content | safeCSS -}}
</style>
{{- end -}} {{ else }} {{ $styles = $styles | resources.ExecuteAsTemplate
(printf "css/index.dev.%v.css" now.UnixMilli) .}}
<link href="{{ $styles.RelPermalink }}" rel="stylesheet" />
{{ end }}
<!-- end tailwind css -->
<style>
  .text-box {
    text-align: center;
    overflow: hidden;
    font-size: 4em;
  }
  .ani-text,
  .ani-text2 {
    display: inline-block;
  }
  .text-box .ani-text2 color {
    font-weight: 900;
  }
  .to-out {
    transition: all 1s;
    opacity: 0;
  }
  section.subscribe {
    background: #1b1c1e;
  }
</style>

<div class="text-box">
  <span class="ani-text">Hi! My name is Stan</span>
  <span class="ani-text2">I'm here to <color id="act-text"></color></span>
</div>
<section
  id="code-demo"
  class="py-8"
  style="width: 720px; height: 525px"
></section>

<!--
<section id="cta" class="flex justify-center">
  <a
    class="to-out py-4 font-semibold text-sm themable-button text-white border border-slate-300 rounded-md shadow-sm ring-2 ring-offset-2 ring-offset-slate-50 ring-blue-500 dark:ring-offset-slate-900 dark:bg-slate-700 dark:text-slate-200 dark:border-transparent"
    href="/contact"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-6 w-6 float-left"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
      />
    </svg>
    Contact
  </a>
</section>
-->
<!--
<article class="post-single">
  <header class="post-header">
    {{ partial "breadcrumbs.html" . }}
    <h1 class="post-title">
      {{ .Title }}
      {{- if .Draft }}<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup>{{- end }}
    </h1>
    {{- if .Description }}
    <div class="post-description">
      {{ .Description }}
    </div>
    {{- end }}
    {{- if not (.Param "hideMeta") }}
    <div class="post-meta">
      {{- partial "translation_list.html" . -}}
      {{- partial "post_canonical.html" . -}}
    </div>
    {{- end }}
  </header>
  {{- $isHidden := .Params.cover.hidden | default site.Params.cover.hiddenInSingle | default site.Params.cover.hidden }}
  {{- partial "cover.html" (dict "cxt" . "IsHome" false "isHidden" $isHidden) }}
  {{- if (.Param "ShowToc") }}
  {{- partial "toc.html" . }}
  {{- end }}

  {{- if .Content }}
  <div class="post-content">
    {{ .Content }}
  </div>
  {{- end }}

  <footer class="post-footer">
    {{- $tags := .Language.Params.Taxonomies.tag | default "tags" }}
    <ul class="post-tags">
      {{- range ($.GetTerms $tags) }}
      <li><a href="{{ .Permalink }}">{{ .LinkTitle }}</a></li>
      {{- end }}
    </ul>
    {{- if (.Param "ShowPostNavLinks") }}
    {{- partial "post_nav_links.html" . }}
    {{- end }}
    {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }}
    {{- partial "share_icons.html" . -}}
    {{- end }}
  </footer>

  {{- if (.Param "comments") }}
  {{- partial "comments.html" . }}
  {{- end }}
</article>
-->
<section class="front-bottom-list flex justify-between to-out">
  <div id="front-recent-posts" class="front-list w-64">
    <h3 class="text-2xl py-8"><a href="/blog">Posts</a></h3>
    <ul class="list-disc ml-4">
      <li>test</li>
      <li>test</li>
    </ul>
  </div>
  <div id="front-changelog" class="front-list w-64">
    <h3 class="text-2xl py-8"><a href="/changelog">Changelog</a></h3>
    <ul class="list-disc ml-4">
      <li>
        Lorem ipsum dolor sit amet consectetur, adipisicing elit. Adipisci
        consequatur numquam animi maiores sapiente, minus eos id error in
        laudantium reprehenderit nam consequuntur optio rerum quo perferendis
        odio repudiandae provident!
      </li>
      <li>test</li>
    </ul>
  </div>
</section>
<section id="subscribe" class="to-out pt-12 flex flex-col justify-center items-center text-center">
  <div class="subscribe-announcement m-4 max-w-md">
    <h2 class="text-2xl font-bold">Subscribe</h2>
    <p>Get cool monthly updates</p>
  </div>
  <div class="max-w-md">
    <form class="m-4 flex">
      <input
        class="rounded-l-lg p-4 border-t mr-0 border-b border-l text-gray-800 border-gray-200 bg-white"
        placeholder="john@doe.com"
      />
      <button
        class="themable-button px-8 rounded-r-lg bg-yellow-400 text-white font-bold p-4 uppercase border-yellow-500 border-t border-b border-r"
      >
        Subscribe
      </button>
    </form>
  </div>
</section>

<script src="https://threejs.org/build/three.min.js"></script>
<script src="/Julia/dat.gui.min.js"></script>
<script src="/Julia/main.js"></script>
<script src="https://animejs.com/lib/anime.min.js"></script>
<script>
  var data = [];
  {{- $data := $.Site.Data.acts.acts.acts | jsonify }}
  try {
    data = JSON.parse({{$data}});
  } catch(e) {}
  const actTextEl = document.getElementById('act-text');
  const someAct = data[Math.floor(Math.random()*data.length)];
  const defaultAct = {
    name: 'Create',
    color: '#9630a7',
    color_end: '#9630a7',
  };
  var randomAct = someAct ? someAct : defaultAct;
  actTextEl.textContent = randomAct.name;
  actTextEl.style.color = randomAct.color;
  var elems = document.querySelectorAll(".themable-button");
  [].forEach.call(elems, function (el) {
    el.style.background = randomAct.color;
  });
</script>
<script>
  const primaryAnimation = () => {
    var loopCompleted = 0;
    anime
      .timeline({
        loop: true,
        duration: 6000,
        loopComplete: function (anim) {
          loopCompleted++;
          if (loopCompleted > 3) {
            anime.remove(".text-box .ani-text2 color");
          }
        },
      })
      .add({
        targets: ".text-box .ani-text2 color",
        color: randomAct.color,
        easing: "easeInOutSine",
        duration: 1000,
      })
      .add({
        targets: ".text-box .ani-text2 color",
        color: randomAct.colorEnd,
        easing: "easeInOutSine",
        duration: 1000,
      });

    anime
      .timeline({ loop: false })
      .add({
        targets: ".to-out",
        opacity: 0,
        duration: 1000,
        easing: "easeOutExpo",
        delay: 1000,
      })
      .add({
        targets: ".text-box .ani-text",
        translateY: [100, 0],
        easing: "easeOutExpo",
        duration: 1400,
      })
      .add({
        targets: ".text-box .ani-text",
        opacity: 0,
        easing: "easeOutExpo",
        duration: 400,
        delay: 1000,
      })
      .add({
        targets: ".text-box .ani-text2",
        translateY: [100, 0],
        easing: "easeOutExpo",
        duration: 1400,
      })
      .add({
        targets: ".text-box",
        display: "none",
        width: "0px",
        height: "0px",
        duration: 1000,
        easing: "easeOutExpo",
        delay: 1000,
      })
      .add({
        targets: ".to-out",
        opacity: 1,
        duration: 1000,
        easing: "easeOutExpo",
      });
  };
  function getTimestampInSeconds() {
    return Math.floor(Date.now() / 1000);
  }

  const highlightState = localStorage.getItem("highlight");
  const needHighlight = highlightState
    ? getTimestampInSeconds() - parseInt(highlightState) > 1440
    : true;

  if (needHighlight) {
    localStorage.setItem("highlight", getTimestampInSeconds());
    primaryAnimation();
  } else {
    var elems = document.querySelectorAll(".to-out");
    [].forEach.call(elems, function (el) {
      el.classList.remove("to-out");
    });
  }
</script>
{{- end }}{{/* end main */}}
